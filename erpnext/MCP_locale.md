# Model Context Profile: Locale

## 1. Module Overview

The **Locale** module in ERPNext is a non-functional, data-centric module that serves as the central repository for all language translation files. It does not contain any Python code, DocTypes, or business logic. Its sole purpose is to store the data required for the internationalization (i18n) and localization (l10n) of the ERPNext application.

This module is a critical component of the Frappe Framework's translation infrastructure, enabling ERPNext to be used by a global audience in multiple languages.

## 2. Core Concepts

### a. Gettext Portable Object (PO) and Template (POT) Files

The module's functionality is based on the standard `gettext` system, which uses two types of files:

-   **`.pot` (Portable Object Template)**: This is the master template file, represented by [`main.pot`](erpnext-develop/erpnext/locale/main.pot). It is generated by the `bench get-untranslated` command, which scans the entire ERPNext codebase for translatable strings (e.g., `_("My String")`). This file contains a list of all unique strings that need to be translated, but it does not contain any translations itself.

-   **`.po` (Portable Object)**: These are the actual translation files for each language, such as [`fr.po`](erpnext-develop/erpnext/locale/fr.po) for French or [`de.po`](erpnext-develop/erpnext/locale/de.po) for German. Each `.po` file is a copy of the `.pot` template and contains the original English string (`msgid`) paired with its translated equivalent (`msgstr`) for that specific language.

### b. Translation Workflow

The typical workflow involving the `locale` module is as follows:
1.  **Extraction**: A developer runs `bench get-untranslated` to update the `main.pot` file with any new strings from the codebase.
2.  **Update**: The changes from the `.pot` file are then merged into each of the language-specific `.po` files.
3.  **Translation**: Translators fill in the `msgstr` values in the `.po` files for their respective languages.
4.  **Compilation**: During the build process (`bench build`), these `.po` files are compiled into binary `.mo` files (not stored in the repository), which are optimized for fast lookups by the runtime system.
5.  **Runtime**: When a user selects a language, the Frappe Framework uses the compiled `.mo` files to look up and display the correct translated strings in the user interface.

## 3. Data Model and Structure

The data model for this module is the file system itself, specifically the collection of `.po` and `.pot` files.

-   **Root Directory**: `erpnext/locale/`
-   **Template File**: [`main.pot`](erpnext-develop/erpnext/locale/main.pot) - The master list of all translatable strings.
-   **Translation Files**: A series of `.po` files, each named with the language code it represents (e.g., `es.po`, `zh.po`).

## 4. Key Files

-   [`main.pot`](erpnext-develop/erpnext/locale/main.pot): The source template for all translations in the ERPNext app.
-   `[lang].po`: The individual translation files that contain the localized strings for each supported language.

## 5. Integrations

The `locale` module is tightly integrated with the Frappe Framework's build and internationalization systems.
-   **`bench get-untranslated`**: This command reads the codebase and writes to the `.pot` file in this module.
-   **`bench build`**: This command reads the `.po` files from this module to generate the compiled translation files used at runtime.
-   **Frappe Runtime**: The core framework uses the output of this module to render the user interface in the user's selected language.

The module has no direct runtime integrations with other ERPNext modules but provides the essential data that allows the entire application to be multilingual.

## 6. Callable Functions (`@frappe.whitelist()`)

This module has **no whitelisted functions**. It is a data module for the build process and does not expose any callable API methods.